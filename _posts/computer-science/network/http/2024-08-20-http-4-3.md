---
title: HTTP (4-3) - Proxy ìºì‹œì™€ HTTP ìºì‹œ ë¬´íš¨í™”
description: Proxy ìºì‹œì™€ HTTP ìºì‹œ ë¬´íš¨í™”ì— ëŒ€í•œ ê°œë… ì •ë¦¬
categories: [Computer Science, Network]
tags: [computer-science, network, http, cache] # TAG names should always be lowercase
pin: false
math: true
mermaid: true
published: true
private: true # ì»¤ìŠ¤í…€í•´ì„œ ë§Œë“  ê²ƒ
image-path: /assets/img/computer-science/network/http/http-4 # ì´ë¯¸ì§€ ê³µí†µ ê²½ë¡œ ë³€ìˆ˜
image:
  path: /assets/img/computer-science/network/http/http-4/http-4-3.png
  lqip: data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=
  alt: Proxy ì„œë²„ì˜ ì‘ë™ ì›ë¦¬
---

> HTTPì™€ ì›¹ ë¸Œë¼ìš°ì €ì˜ ìºì‹œ ê²€ì¦ê³¼ ì¡°ê±´ë¶€ ìš”ì²­ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ [#HTTP (4-2) - HTTP ìºì‹œ ê²€ì¦ & ì¡°ê±´ë¶€ ìš”ì²­][http-4-2] ê²Œì‹œê¸€ì„ ì°¸ê³ 

## í”„ë¡ì‹œ(Proxy) ìºì‹œ

í”„ë¡ì‹œëŠ” í´ë¼ì´ì–¸íŠ¸ì™€ ë³¸ ì„œë²„ë¥¼ ì¤‘ê³„í•˜ëŠ” ì¤‘ê°„ì— ìœ„ì¹˜í•œ ì„œë²„ ëŒ€ë¦¬ìë¡œì„œ, í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì„ ëŒ€ì‹  ë°›ê³  ë³¸ ì„œë²„ì— í•´ë‹¹ ìš”ì²­ì„ ëŒ€ì‹  ì „ë‹¬í•´ì£¼ëŠ” ì—­í• ì„ í•œë‹¤.

ì´ í”„ë¡ì‹œë¥¼ <ins>ìºì‹œ ì„œë²„</ins>ë¡œì„œ ì´ìš©í•  ìˆ˜ ìˆëŠ”ë°, ì˜ˆë¥¼ ë“¤ì–´ì„œ í•œêµ­ì— ìˆëŠ” í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì´ë¯¸ì§€ê°€ í•„ìš”í•œ ìƒí™©ì´ê³ , í•´ë‹¹ ì´ë¯¸ì§€ì˜ ë³¸ ì„œë²„ê°€ ë¯¸êµ­ì— ìˆë‹¤ê³  ê°€ì •í•´ë³´ì.

í•œêµ­ ì„œë²„ì—ì„œ ë¯¸êµ­ ì„œë²„ê¹Œì§€ ì§ì ‘ ì ‘ê·¼í•˜ì—¬ ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì˜¤ëŠ”ë°ëŠ” ì•½ 0.5ì´ˆê°€ ê±¸ë¦°ë‹¤ê³  í•˜ë©´, í•œêµ­ì— ìœ„ì¹˜í•œ ì»´í“¨í„°ë“¤ì€ ëª¨ë‘ 0.5ì´ˆ ê°€ëŸ‰ì„ ê¸°ë‹¤ë ¤ì•¼ í•´ë‹¹ ì´ë¯¸ì§€ë¥¼ ë°›ì„ ìˆ˜ ìˆê²Œ ëœë‹¤.

![image_31][image_31]

ìœ„ì™€ ê°™ì€ í˜„ìƒì„ í•´ê²°í•˜ê¸° ìœ„í•´ í”„ë¡ì‹œ ìºì‹œë¥¼ ë„ì…í•˜ì—¬ ì‚¬ìš©í•œë‹¤ê³  ë³´ë©´ ëœë‹¤.

í•œêµ­ì— í”„ë¡ì‹œ ìºì‹œ ì„œë²„ë¥¼ ë”°ë¡œ ë‘ê³ , ìµœì´ˆì˜ ìš”ì²­ì—ë§Œ ë¯¸êµ­ ì„œë²„ê¹Œì§€ ê°€ì„œ ì´ë¯¸ì§€ ë¦¬ì†ŒìŠ¤ë¥¼ ë°›ì•„ì˜¤ê³  í”„ë¡ì‹œ ìºì‹œ ì„œë²„ì— ì €ì¥í•œë‹¤.

ê·¸ëŸ¬ë©´ í•œêµ­ì˜ í´ë¼ì´ì–¸íŠ¸ëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ ê°€ì ¸ì˜¬ ë•Œ í”„ë¡ì‹œ ìºì‹œ ì„œë²„ë¡œë¶€í„° ê°€ì ¸ì˜¤ë©´ ëœë‹¤.

![image_32][image_32]

íŠ¹íˆ ì—¬ëŸ¬ ì‚¬ëŒë“¤ì´ ì°¾ëŠ” ìë£Œì¼ìˆ˜ë¡ ì´ë¯¸ ìºì‹œì— ë“±ë¡ë˜ì–´ìˆì„ ê°€ëŠ¥ì„±ì´ í¬ê¸°ì— íš¨ê³¼ì ìœ¼ë¡œ ë¹ ë¥¸ ì†ë„ë¡œ ìë£Œë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.

ìœ íŠœë¸Œì—ì„œ ê³ ìš©ëŸ‰ì˜ ì˜ìƒì„ ë¹ ë¥´ê²Œ ë³¼ ìˆ˜ ìˆëŠ” ì´ìœ ë„ ì´ì— í•´ë‹¹í•œë‹¤.

ì¦‰, ê°™ì€ êµ­ë‚´ì— ìºì‹œëœ ë°ì´í„°ê°€ ìˆëŠ” ë•ë¶„ì— ë³¸ ì„œë²„ì— ì ‘ê·¼í•˜ëŠ” ê²ƒë³´ë‹¤ í›¨ì”¬ ë¹ ë¥¸ ì†ë„ì— ìë£Œë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤.

![image_33][image_33]

ì°¸ê³ ë¡œ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì‚¬ìš©ë˜ê³  ì €ì¥ë˜ëŠ” ìºì‹œë¥¼ <ins class="red">private ìºì‹œ</ins>ë¼ê³  í•˜ë©°, í”„ë¡ì‹œ ìºì‹œ ì„œë²„ì˜ ìºì‹œë¥¼ <ins class="blue">public ìºì‹œ</ins>ë¼ê³  í•œë‹¤.

ì›¹ ë¸Œë¼ìš°ì € ìºì‹œì™€ í”„ë¡ì‹œ ì„œë²„ ìºì‹œê°€ ë¶„ë¦¬ë˜ì–´ ìš´ìš©ë˜ëŠ” ë§Œí¼, ìœ„ì—ì„œ ì„¤ëª…í•œ Cache-Control HTTP í—¤ë”ë„ <ins>í”„ë¡ì‹œ ì „ìš©ìœ¼ë¡œ ìºì‹œë¥¼ ì„¤ì •</ins>í•´ì•¼ í•œë‹¤.

### í”„ë¡ì‹œ ìºì‹œ í—¤ë”

![image_34][image_34]
_CDNì—ì„œëŠ” 1ë…„ ë™ì•ˆ ìºì‹œë˜ì§€ë§Œ, ë¸Œë¼ìš°ì €ì—ì„œëŠ” ë§¤ë²ˆ ì¬ê²€ì¦ ìš”ì²­ì„ ë³´ë‚´ë„ë¡ ì„¤ì •_

- `Cache-Control: private`
  : ì‘ë‹µì´ í•´ë‹¹ ì‚¬ìš©ìë§Œì„ ìœ„í•œ ê²ƒìœ¼ë¡œ private ìºì‹œì— ì €ì¥í•´ì•¼ í•œë‹¤. (default)

- `Cache-Control: public`
  : ì‘ë‹µì´ public ìºì‹œì— ì €ì¥ë˜ì–´ì•¼ í•œë‹¤.

- `Cache-Control: s-maxage`
  : í”„ë¡ì‹œ ìºì‹œì—ë§Œ ì ìš©ë˜ëŠ” `max-age`

- `Age: 60`
  : HTTP í—¤ë”ë¡œì¨, ì˜¤ë¦¬ì§„ ì„œë²„ì—ì„œ ì‘ë‹µ í”„ë¡ì‹œ ìºì‹œ ë‚´ì— ë¨¸ë¬¸ ì‹œê°„ì´ë‹¤.(ì´ˆ ë‹¨ìœ„)

## HTTP ìºì‹œ ë¬´íš¨í™”

<ins>ìºì‹œ ë¬´íš¨í™”(Cache Busting)</ins>ëŠ” ë§ ê·¸ëŒ€ë¡œ ì›¹ ë¸Œë¼ìš°ì €ì˜ ìºì‹œë¥¼ ì™„ì „íˆ ì œê±°í•´ ë²„ë¦¬ëŠ” ê²ƒì„ ë§í•œë‹¤.

ì´ëŸ¬í•œ ê¸°ìˆ ì´ í•„ìš”í•œ ì´ìœ ëŠ” ì›¹ ë¸Œë¼ìš°ì €ë“¤ì´ `GET` ìš”ì²­ì„ ë°›ì„ ê²½ìš°ì— ë³„ë„ì˜ ìºì‹œ í—¤ë” ì—†ì´ë„ <ins class="red">ìê¸° ë§ˆìŒëŒ€ë¡œ ìµœì í™”ë¥¼ í•œë‹¤ê³  ì„ì˜ë¡œ ìºì‹±ì„ í•´ ë²„ë¦¬ê¸° ë•Œë¬¸</ins>ì´ë‹¤.

ë˜í•œ ë¦¬ì†ŒìŠ¤ì˜ ìºì‹œ ìœ íš¨ ê¸°ê°„ì„ ê¸¸ê²Œ ì„¤ì •í•´ë²„ë¦¬ëŠ” ë°”ëŒì— ë¦¬ì†ŒìŠ¤ì˜ ì—…ë°ì´íŠ¸ê°€ í•„ìš”í•  ê²½ìš°, ìºì‹œ ì €ì¥ì†Œì˜ ë³µì‚¬ë³¸ì„ ê°±ì‹ í•´ì¤˜ì•¼ í•˜ëŠ”ë°, ê¸°ë³¸ì ìœ¼ë¡œ ë¸Œë¼ìš°ì €ëŠ” ìºì‹œ ìœ íš¨ ê¸°ê°„ì´ ëë‚˜ì•¼ ìºì‹œ ìœ íš¨ì„± ê²€ì¦ì„ ì„œë²„ì—ê²Œ ìš”ì²­í•˜ê¸° ë•Œë¬¸ì— ì–´ë– í•œ ë°©ë²•ì´ ì—†ë‹¤.

ì´ëŸ° ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ìºì‹œ ë¬´íš¨í™” ì „ëµì„ ì‚¬ìš©í•œë‹¤ê³  ë³´ë©´ ëœë‹¤.

```mermaid
---
title: Cache-Controlì˜ íë¦„ë„
---
flowchart TD
  A(ì‘ë‹µì„ ìºì‹± í•  ê²ƒì¸ê°€?) -->|<ins class="red">NO</ins>| B(no-store<br>ìºì‹± ì•ˆí•¨)
  A -->|<ins class="blue">YES</ins>| C(ìºì‹œ ì‚¬ìš© ì „ì— <ins>ìºì‹œ ìœ íš¨ì„± ê²€ì¦</ins>ì„ í•  ê²ƒì¸ê°€?)
  C -->|<ins class="red">NO</ins>| D(í”„ë¡ì‹œ ìºì‹œë¥¼ ì‚¬ìš©í•˜ëŠ”ê°€?)
  C -->|<ins class="blue">YES</ins>| E(no-cache<br><ins>ë§¤ë²ˆ ì„œë²„ì—ì„œ ìºì‹œ ìœ íš¨ì„± ê²€ì¦</ins>ì„ í•˜ê³  ìºì‹œ ì‚¬ìš©)
  E --> D
  D -->|<ins class="blue">YES</ins>| F(public<br><ins>í”„ë¡ì‹œ ìºì‹œì— ì €ì¥</ins>)
  D -->|<ins class="red">NO</ins>| G(private<br><ins>í´ë¼ì´ì–¸íŠ¸ ìºì‹œì— ì €ì¥</ins>)
  G --> H(ìºì‹œ ìœ íš¨ ê¸°ê°„ì„ ì„¤ì •í•˜ëŠ”ê°€?)
  F --> H
  H --> I(max-age= âˆ™âˆ™âˆ™)
  I --> J(Add ETag Header)
```

### ìºì‹œ ë¬´íš¨í™” í—¤ë”

ë§Œì•½ ìºì‹œë¥¼ ì‚¬ìš©í•´ì„œëŠ” ì•ˆë˜ëŠ” í˜ì´ì§€ê°€ ì¡´ì¬í•œë‹¤ë©´, ë‹¤ìŒê³¼ ê°™ì´ Cache-Control í—¤ë”ì— íŒŒë¼ë¯¸í„°ë“¤ì„ ì„¤ì •í•´ì¤˜ì•¼ í•œë‹¤.

```http
HTTP/1.1 200 OK
Cache-Control: no-cache, no-store, must-revalidate
Pragma: no-cache
```

- `Cache-Control: no-cache`
  : ë°ì´í„°ëŠ” ìºì‹œí•´ë„ ë˜ì§€ë§Œ, í•­ìƒ ë³¸ ì„œë²„ì— ê²€ì¦í•˜ê³  ì‚¬ìš©í•´ì•¼ í•œë‹¤ëŠ” ì˜ë¯¸ë¡œ, `max-age=0`ê³¼ ë™ì¼í•œ ëœ»ì´ë‹¤.
  : ì¦‰, ì„œë²„ë¡œë¶€í„° 304 ì‘ë‹µì„ ë°›ì•„ì•¼ ìºì‹œì—ì„œ ê°€ì ¸ì˜¨ë‹¤ëŠ” ì˜ë¯¸ë¡œ, ë¹„ë¡ ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ì´ ë°œìƒí•˜ì§€ë§Œ í—¤ë” ë©”ì‹œì§€ë§Œ ì‘ë‹µë°›ê¸° ë•Œë¬¸ì— ë„¤íŠ¸ì›Œí¬ ë‹¤ìš´ë¡œë“œëŸ‰ì€ ì ë‹¤.
  : `no-cache`ë¼ëŠ” ëª…ì¹­ ë•Œë¬¸ì— ìºì‹œë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ê³  ìƒê°í•  ìˆ˜ ìˆì§€ë§Œ, ì´ ë‹¨ì–´ì˜ ì˜ë¯¸ëŠ” ë³¸ë˜ ìºì‹œ ìœ íš¨ ê¸°ê°„ì´ ë‚¨ì•„ìˆìœ¼ë©´ ë¬´ì¡°ê±´ ìºì‹œ ì €ì¥ì†Œë¥¼ ì¡°íšŒí•˜ì§€ë§Œ, ê·¸ëŸ¬ì§€ ë§ê³  ë¬´ì¡°ê±´ ì„œë²„ì— ê²€ì¦ì„ ë°›ìœ¼ë¼ëŠ” ì˜ë¯¸ì´ë‹¤.

- `Cache-Control: no-store`
  : ë°ì´í„°ì— ë¯¼ê°í•œ ì •ë³´ê°€ ìˆê¸°ì— ì €ì¥í•˜ë©´ ì•ˆëœë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.
  : ë©”ëª¨ë¦¬ì—ì„œ ì‚¬ìš©í•˜ê³  ìµœëŒ€í•œ ë¹ ë¥´ê²Œ ì‚­ì œí•œë‹¤.

- `Cache-Control: must-revalidate`
  : ìºì‹œ ë§Œë£Œ í›„ ìµœì´ˆ ì¡°íšŒ ì‹œ, ë³¸ ì„œë²„ì— ê²€ì¦í•´ì•¼ í•  ë•Œ ì„¤ì •í•œë‹¤.
  : ë³¸ ì„œë²„ì— ì ‘ê·¼ ì‹¤íŒ¨ ì‹œ, ë°˜ë“œì‹œ 504(Gateway Timeout) ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë„ë¡ í•´ì•¼ í•œë‹¤.
  : ë§Œì¼ ìºì‹œ ìœ íš¨ ì‹œê°„ ë‚´ì— ìˆë‹¤ë©´, ìºì‹œë¥¼ ì‚¬ìš©í•œë‹¤.

- `Pragma: no-cache`
  : HTTP/1.0 í•˜ìœ„ í˜¸í™˜ìš©ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤.

{: .prompt-tip}

> ê°„í˜¹, ëª‡ëª‡ ì›¹ í˜ì´ì§€ì—ì„œëŠ” ìºì‹œ ë¬´íš¨í™” ìš°íšŒ ë¡œì§ìœ¼ë¡œ Cache-Control í—¤ë”ì— `max-age=0`ìœ¼ë¡œ ì„¤ì •í•´ ë†“ëŠ”ë‹¤.
>
> ìºì‹œ ìœ íš¨ ì‹œê°„ì„ `0`ìœ¼ë¡œ ì„¤ì •í•´ ë†“ìœ¼ë©´, ë§¤ë²ˆ ë¦¬ì†ŒìŠ¤ë¥¼ ìš”ì²­í•  ë•Œë§ˆë‹¤ ì„œë²„ì— ì¬ê²€ì¦ ìš”ì²­ì„ ë³´ë‚´ê²Œ ëœë‹¤.
>
> í•˜ì§€ë§Œ, ëª‡ëª‡ ì¼ë¶€ ëª¨ë°”ì¼ ë¸Œë¼ìš°ì €ì˜ ê²½ìš° ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì„ ì•„ë¼ê³  ì‚¬ìš©ìì—ê²Œ ë¹ ë¥¸ ì›¹ ê²½í—˜ì„ ì œê³µí•˜ê¸° ìœ„í•´ ì›¹ ë¸Œë¼ìš°ì €ë¥¼ ê»ë‹¤ ì¼œê¸° ì „ê¹Œì§€ ë¦¬ì†ŒìŠ¤ê°€ ë§Œë£Œë˜ì§€ ì•Šë„ë¡ í•˜ëŠ” ê²½ìš°ë„ ì¡´ì¬í•œë‹¤.
>
> ë”°ë¼ì„œ `max-age=0`ì„ ì‚¬ìš©í•˜ê¸° ë³´ë‹¤ëŠ” ì¢€ ë” ëª…í™•í•œ `no-store` íŒŒë¼ë¯¸í„°ë¥¼ ì‚¬ìš©í•˜ê¸°ë¥¼ ê¶Œì¥í•œë‹¤.

## ì°¸ê³  ì‚¬ì´íŠ¸

> [Inpa Dev - ğŸŒ ì›¹ ë¸Œë¼ìš°ì €ì˜ Cache ì „ëµ & í—¤ë” ë‹¤ë£¨ê¸°][ref_site_1]
>
> [Semantics - HTTP (7) - ìºì‹œì™€ ì¡°ê±´ë¶€ ìš”ì²­ (Last-Modified / ETag)][ref_site_2]

<!-- ì´ë¯¸ì§€ -->

[image_1]: {{page.image-path}}/http-4_1.png
[image_2]: {{page.image-path}}/http-4_2.png
[image_3]: {{page.image-path}}/http-4_3.png
[image_4]: {{page.image-path}}/http-4_4.png
[image_5]: {{page.image-path}}/http-4_5.png
[image_6]: {{page.image-path}}/http-4_6.png
[image_7]: {{page.image-path}}/http-4_7.png
[image_8]: {{page.image-path}}/http-4_8.png
[image_9]: {{page.image-path}}/http-4_9.png
[image_10]: {{page.image-path}}/http-4_10.png
[image_11_dark]: {{page.image-path}}/http-4_11_dark.png
[image_12_dark]: {{page.image-path}}/http-4_12_dark.png
[image_11_light]: {{page.image-path}}/http-4_11_light.png
[image_12_light]: {{page.image-path}}/http-4_12_light.png
[image_13]: {{page.image-path}}/http-4_13.png
[image_14]: {{page.image-path}}/http-4_14.png
[image_15]: {{page.image-path}}/http-4_15.png
[image_16]: {{page.image-path}}/http-4_16.png
[image_17]: {{page.image-path}}/http-4_17.png
[image_18]: {{page.image-path}}/http-4_18.png
[image_19]: {{page.image-path}}/http-4_19.png
[image_20]: {{page.image-path}}/http-4_20.png
[image_21]: {{page.image-path}}/http-4_21.png
[image_22]: {{page.image-path}}/http-4_22.png
[image_23]: {{page.image-path}}/http-4_23.png
[image_23_dark]: {{page.image-path}}/http-4_23_dark.png
[image_23_light]: {{page.image-path}}/http-4_23_light.png
[image_24]: {{page.image-path}}/http-4_24.png
[image_25]: {{page.image-path}}/http-4_25.png
[image_26]: {{page.image-path}}/http-4_26.png
[image_27]: {{page.image-path}}/http-4_27.png
[image_28]: {{page.image-path}}/http-4_28.png
[image_29]: {{page.image-path}}/http-4_29.png
[image_30]: {{page.image-path}}/http-4_30.png
[image_31]: {{page.image-path}}/http-4_31.png
[image_32]: {{page.image-path}}/http-4_32.png
[image_33]: {{page.image-path}}/http-4_33.png
[image_34]: {{page.image-path}}/http-4_34.png
[image_35]: {{page.image-path}}/http-4_35.png
[image_36]: {{page.image-path}}/http-4_36.png
[image_37]: {{page.image-path}}/http-4_37.png
[image_38]: {{page.image-path}}/http-4_38.png
[image_39]: {{page.image-path}}/http-4_39.png

<!-- ë¸”ë¡œê·¸ ê²Œì‹œê¸€ -->

[http-4-2]: {{site.url}}/posts/http-4-2

<!-- ì°¸ê³  ì‚¬ì´íŠ¸ -->

[ref_site_1]: https://inpa.tistory.com/entry/HTTP-%F0%9F%8C%90-%EC%9B%B9-%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80%EC%9D%98-%EC%BA%90%EC%8B%9C-%EC%A0%84%EB%9E%B5-Cache-Headers-%EB%8B%A4%EB%A3%A8%EA%B8%B0
[ref_site_2]: https://velog.io/@neity16/HTTP-7-%EC%BA%90%EC%8B%9C%EC%99%80-%EC%A1%B0%EA%B1%B4%EB%B6%80-%EC%9A%94%EC%B2%AD-Last-Modified-ETag
